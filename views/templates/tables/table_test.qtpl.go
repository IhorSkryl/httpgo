// This file is automatically generated by qtc from "table_test.qtpl".
// See https://github.com/valyala/quicktemplate for details.

//line views/templates/tables/table_test.qtpl:1
package tables

//line views/templates/tables/table_test.qtpl:1
import (
	qtio422016 "io"

	qt422016 "github.com/valyala/quicktemplate"
)

//line views/templates/tables/table_test.qtpl:1
var (
	_ = qtio422016.Copy
	_ = qt422016.AcquireByteBuffer
)

//line views/templates/tables/table_test.qtpl:1
func StreamTableTesting(qw422016 *qt422016.Writer) {
	//line views/templates/tables/table_test.qtpl:1
	qw422016.N().S(`

    <link rel="import" href="/polymer.html">

<dom-module id="juicy-table-repeat">
    <template>
        <style>
            :host {
                display: block;
            }
        </style>
        <content></content>
    </template>
    <script>
        Polymer({
            is: "juicy-table-repeat",
            properties: {
                rows: { type: Array, value: [] },
                item: { type: Object }
            },
            stampedRowTemplates: null,
            attached: function () {
                this.table = this.querySelector("table");
                this.tbody = this.querySelector("table tbody")
                this.rowTemplate = this.querySelector("template.row-template");
                var that = this;
                // Forward item's notification up to the root
                this.rowTemplate._forwardInstancePath = function (inst, path, value) {
                    var index = that.stampedRowTemplates.indexOf(inst);
                    that.notifyPath('rows.' + index + path.substr(4), value);
                };

                this.isAttached = true;
                this.generateRows();
            },
            observers: [
                'rowsChanged(rows.length, rows.splices)',
                'itemChanged(rows.*)'
            ],
            itemChanged: function (change) {
                // TODO: watchout for keys
                if (this.isAttached && change.path == "rows") {
                    this.generateRows();
                }
                else {
                    var path = change.path.match(/rows\.#(\d+)\.(.+)/);
                    if (path) {
                        this.propagateItemChanges(path, change.value);
                    }
                }
            },
            propagateItemChanges: function (path, value) {
                // Make sure that elements were stamped
                // workaround for Juicy/juicy-table-repeat/issues/4
                this.stampedRowTemplates[path[1]] &&
                // notify template
                  this.stampedRowTemplates[path[1]].notifyPath('item.' + path[2], value);
            },
            generateRows: function () {
                this.tbody.innerHTML = "";
                this.stampedRowTemplates = [];
                if (!this.rows || !this.rows.length) {
                    return;
                }

                for (var i = 0; i < this.rows.length; i++) {
                    var row = this.rowTemplate.stamp({ item: this.rows[i] });
                    var tr = row.root.querySelector("tr");
                    this.tbody.appendChild(tr);
                    this.stampedRowTemplates.push(row);
                }
            },
            rowsChanged: function (e) {
                this.generateRows();
            }
        });
    </script>
</dom-module>

`)
//line views/templates/tables/table_test.qtpl:80
}

//line views/templates/tables/table_test.qtpl:80
func WriteTableTesting(qq422016 qtio422016.Writer) {
	//line views/templates/tables/table_test.qtpl:80
	qw422016 := qt422016.AcquireWriter(qq422016)
	//line views/templates/tables/table_test.qtpl:80
	StreamTableTesting(qw422016)
	//line views/templates/tables/table_test.qtpl:80
	qt422016.ReleaseWriter(qw422016)
//line views/templates/tables/table_test.qtpl:80
}

//line views/templates/tables/table_test.qtpl:80
func TableTesting() string {
	//line views/templates/tables/table_test.qtpl:80
	qb422016 := qt422016.AcquireByteBuffer()
	//line views/templates/tables/table_test.qtpl:80
	WriteTableTesting(qb422016)
	//line views/templates/tables/table_test.qtpl:80
	qs422016 := string(qb422016.B)
	//line views/templates/tables/table_test.qtpl:80
	qt422016.ReleaseByteBuffer(qb422016)
	//line views/templates/tables/table_test.qtpl:80
	return qs422016
//line views/templates/tables/table_test.qtpl:80
}
